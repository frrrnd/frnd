---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1); // remove the first "/"

const isActive = (path) => {
    if (path === "" && currentPath === "") {
        return true; // Ativa "Home" somente quando a URL atual é a raiz
    } else if (path !== "" && currentPath.startsWith(path)) {
        return true; // Ativa outras rotas se o currentPath começa com path
    }
    return false;
};
---

<div class="float-navigation">
    <nav>
        <ul>
            <li>
                <a href="/" data-title="Home" class={isActive("") ? "active" : ""}>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.6861 2.83488C13.1618 1.45348 10.8382 1.45348 9.31392 2.83488L4.31392 7.36613C3.47724 8.12438 3 9.20093 3 10.3301V17.0002C3 19.2093 4.79086 21.0002 7 21.0002H8C9.10457 21.0002 10 20.1047 10 19.0002V16.0002C10 14.8956 10.8954 14.0002 12 14.0002C13.1046 14.0002 14 14.8956 14 16.0002V19.0002C14 20.1047 14.8954 21.0002 16 21.0002H17C19.2091 21.0002 21 19.2093 21 17.0002V10.3301C21 9.20093 20.5228 8.12438 19.6861 7.36613L14.6861 2.83488Z" fill="black"/>
                    </svg>                        
                </a>
            </li>

            <li>
                <a href="/about" data-title="About" class={isActive("about") ? "active" : ""}>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C9.51472 2 7.5 4.01472 7.5 6.5C7.5 8.98528 9.51472 11 12 11C14.4853 11 16.5 8.98528 16.5 6.5C16.5 4.01472 14.4853 2 12 2Z" fill="#C3C3C3"/>
                        <path d="M12 12.5C8.73708 12.5 6.14047 14.213 4.77277 16.7569C4.19622 17.8293 4.41122 18.9365 5.05292 19.7348C5.67643 20.5105 6.69558 21 7.79526 21H16.2047C17.3044 21 18.3236 20.5105 18.9471 19.7348C19.5888 18.9365 19.8038 17.8293 19.2272 16.7569C17.8595 14.213 15.2629 12.5 12 12.5Z" fill="#C3C3C3"/>
                    </svg>
                </a>
            </li>

            <li>
                <a href="/labs" data-title="Labs" class={isActive("labs") ? "active" : ""}>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M7 6.75C7 6.33579 7.33579 6 7.75 6H16.25C16.6642 6 17 6.33579 17 6.75C17 7.16421 16.6642 7.5 16.25 7.5H16V10.7326C16.2388 11.0193 16.5054 11.3176 16.7916 11.6355C16.8224 11.6697 16.8534 11.7041 16.8846 11.7387C17.207 12.0967 17.5496 12.4769 17.8799 12.8709C18.6004 13.7301 19.314 14.7126 19.7093 15.8191C19.8897 16.3239 20 16.8582 20 17.4162C20 19.9478 17.9478 22 15.4162 22H8.58376C6.05222 22 4 19.9478 4 17.4162C4 16.8582 4.11031 16.3239 4.29069 15.8191C4.68603 14.7126 5.39964 13.7301 6.1201 12.8709C6.45043 12.4769 6.79298 12.0967 7.1154 11.7387C7.14659 11.7041 7.1776 11.6697 7.2084 11.6355C7.49455 11.3176 7.76115 11.0193 8 10.7326V7.5H7.75C7.33579 7.5 7 7.16421 7 6.75ZM9.5 7.5V11C9.5 11.1703 9.44204 11.3355 9.33565 11.4685C9.02609 11.8555 8.6742 12.2492 8.32324 12.639C8.29282 12.6728 8.26239 12.7066 8.23196 12.7404C7.90671 13.1015 7.5818 13.4622 7.2695 13.8347C6.92546 14.245 6.60957 14.6549 6.34169 15.0689C6.3742 15.0638 6.40703 15.0588 6.44015 15.0537C7.3346 14.9173 8.49301 14.7788 9.43071 14.8038C10.5667 14.8341 11.4299 15.1058 12.2041 15.3494L12.2251 15.356C13.0039 15.6011 13.6939 15.8151 14.6093 15.8396C15.4065 15.8608 16.4549 15.7403 17.3336 15.6063C17.5451 15.574 17.7441 15.5414 17.924 15.5105C17.6107 14.9453 17.1964 14.3903 16.7305 13.8347C16.4182 13.4622 16.0933 13.1015 15.7681 12.7404C15.7376 12.7066 15.7072 12.6728 15.6768 12.639C15.3258 12.2492 14.9739 11.8555 14.6643 11.4685C14.558 11.3355 14.5 11.1703 14.5 11V7.5H9.5Z" fill="#C3C3C3"/>
                        <path d="M11 4C11 4.55228 10.5523 5 10 5C9.44772 5 9 4.55228 9 4C9 3.44772 9.44772 3 10 3C10.5523 3 11 3.44772 11 4Z" fill="#C3C3C3"/>
                        <path d="M15 2.5C15 3.32843 14.3284 4 13.5 4C12.6716 4 12 3.32843 12 2.5C12 1.67157 12.6716 1 13.5 1C14.3284 1 15 1.67157 15 2.5Z" fill="#C3C3C3"/>
                    </svg>
                </a>
            </li>

            <li>
                <a href="/notes" data-title="Notes" class={isActive("notes") ? "active" : ""}>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 6.25C3.5 4.17893 5.17893 2.5 7.25 2.5H16.75C18.8211 2.5 20.5 4.17893 20.5 6.25V17.75C20.5 19.8211 18.8211 21.5 16.75 21.5H7.25C5.17893 21.5 3.5 19.8211 3.5 17.75V16.5H3.25C2.83579 16.5 2.5 16.1642 2.5 15.75C2.5 15.3358 2.83579 15 3.25 15H3.5V12.75H3.25C2.83579 12.75 2.5 12.4142 2.5 12C2.5 11.5858 2.83579 11.25 3.25 11.25H3.5V9H3.25C2.83579 9 2.5 8.66421 2.5 8.25C2.5 7.83579 2.83579 7.5 3.25 7.5H3.5V6.25ZM9 8.25C9 7.83579 9.33579 7.5 9.75 7.5H14.25C14.6642 7.5 15 7.83579 15 8.25C15 8.66421 14.6642 9 14.25 9H9.75C9.33579 9 9 8.66421 9 8.25ZM9 12C9 11.5858 9.33579 11.25 9.75 11.25H12.25C12.6642 11.25 13 11.5858 13 12C13 12.4142 12.6642 12.75 12.25 12.75H9.75C9.33579 12.75 9 12.4142 9 12Z" fill="#C3C3C3"/>
                    </svg>
                </a>
            </li>

            <li>
                <a href="/readings" data-title="Readings" class={isActive("readings") ? "active" : ""}>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.2324 8.35396C13.966 7.4249 14.5032 6.45579 15.4322 6.18939L16.8741 5.77593C17.8032 5.50953 18.7723 6.04672 19.0387 6.97577L22.2085 18.0303C22.4749 18.9593 21.9377 19.9285 21.0087 20.1949L19.5668 20.6083C18.6377 20.8747 17.6686 20.3375 17.4022 19.4085L14.2324 8.35396Z" fill="#C3C3C3"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 3C7.7835 3 7 3.7835 7 4.75V19.25C7 20.2165 7.7835 21 8.75 21H12.25C13.2165 21 14 20.2165 14 19.25V4.75C14 3.7835 13.2165 3 12.25 3H8.75ZM8.5 7.75C8.5 7.33579 8.83579 7 9.25 7H11.75C12.1642 7 12.5 7.33579 12.5 7.75C12.5 8.16421 12.1642 8.5 11.75 8.5H9.25C8.83579 8.5 8.5 8.16421 8.5 7.75ZM12.5 16.25C12.5 15.8358 12.1642 15.5 11.75 15.5H9.25C8.83579 15.5 8.5 15.8358 8.5 16.25C8.5 16.6642 8.83579 17 9.25 17H11.75C12.1642 17 12.5 16.6642 12.5 16.25Z" fill="#C3C3C3"/>
                        <path d="M3.75 5C2.7835 5 2 5.7835 2 6.75V19.25C2 20.2165 2.7835 21 3.75 21H4.25C5.2165 21 6 20.2165 6 19.25V6.75C6 5.7835 5.2165 5 4.25 5H3.75Z" fill="#C3C3C3"/>
                    </svg>                        
                </a>
            </li>

            <li>
                <a href="mailto:dotfernando@gmail.com" data-title="Contact">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.38257 6.10024C2.17502 6.52971 2.08627 6.99344 2.04336 7.51853C1.99999 8.04944 1.99999 8.70505 2 9.51788V14.4821C1.99999 15.2949 1.99999 15.9506 2.04336 16.4815C2.08803 17.0281 2.18239 17.5082 2.40873 17.9525C2.76825 18.6581 3.34193 19.2317 4.04754 19.5913C4.49176 19.8176 4.9719 19.912 5.51853 19.9566C6.04944 20 6.70505 20 7.51788 20H16.4821C17.295 20 17.9506 20 18.4815 19.9566C19.0281 19.912 19.5082 19.8176 19.9525 19.5913C20.6581 19.2317 21.2317 18.6581 21.5913 17.9525C21.8176 17.5082 21.912 17.0281 21.9566 16.4815C22 15.9506 22 15.295 22 14.4821V9.51788C22 8.70505 22 8.04944 21.9566 7.51853C21.9137 6.99344 21.825 6.52971 21.6174 6.10024L14.3746 12.0262C12.9933 13.1564 11.0067 13.1564 9.62536 12.0262L2.38257 6.10024Z" fill="#C3C3C3"/>
                        <path d="M20.7011 4.9119C20.474 4.7158 20.2229 4.54653 19.9525 4.40873C19.5082 4.18239 19.0281 4.08803 18.4815 4.04336C17.9506 3.99999 17.2949 3.99999 16.4821 4H7.5179C6.70507 3.99999 6.04943 3.99999 5.51853 4.04336C4.9719 4.08803 4.49176 4.18239 4.04754 4.40873C3.77708 4.54653 3.526 4.7158 3.29894 4.9119L10.5752 10.8652C11.404 11.5433 12.596 11.5433 13.4248 10.8652L20.7011 4.9119Z" fill="#C3C3C3"/>
                    </svg>                        
                </a>
            </li>
        </ul>
    </nav>
</div>

<style>

    .float-navigation {
        position: fixed;
        top: 35%;
        left: 3%;
        border-radius: 15px;
        padding: 10px;
        transition: .4s;

        &:hover {
            background-color: var(--nav-background);
            transition: .4s;
        }

        ul {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        a {
            display: flex;
            width: 42px;
            height: 42px;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            position: relative;

            &:active svg {
                transform: scale(.8);
                transition: .4s;
            }

            svg {
                transform: scale(1);
            }

            &:hover path {
                fill: var(--nav-icon-hover);
                transition: .4s;
            }

            &:after {
                opacity: 0;
                content: attr(data-title);
                position: absolute;
                left: 58px;
                top: 10px;
                z-index: 10;
                transition: .4s;
                display: block;
                font-weight: 500;
            }

            &:hover:after {
                opacity: 1;
                left: 64px;
            }
        }

        .active {
            background: var(--nav-icon-bg);
            box-shadow: 0px 2px 0px rgba(0, 0, 0, 0.06);

            path {
                fill: var(--nav-icon-active);
            }
        }

        svg path {
            fill: var(--nav-icon);
            transition: .4s;
        }
    }

    @media screen and  (max-width: 800px) {
        .float-navigation {
            position: static;
        }
        
        .float-navigation ul {
            flex-direction: row;
        }

        .float-navigation a:after {
            display: none;
        }
    }
</style>