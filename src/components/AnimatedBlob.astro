---
// AnimatedBlob.astro
---

<div id="animated-blob-container" class="blob-container">
  <div class="blob-animation-wrapper">
    <svg class="blob-svg" fill="none" preserveAspectRatio="none" viewBox="0 0 1920 1080" width="100%" height="100%">
      <g clip-path="url(#clip0_1_13)" id="animated-blob">
        <!-- Background gradient -->
        <rect fill="url(#paint0_linear_1_13)" height="100%" width="100%" />
        
        <!-- Large animated ellipse -->
        <ellipse
          cx="1023.55"
          cy="449.962"
          fill="url(#paint1_linear_1_13)"
          id="blob-main"
          rx="988.774"
          ry="583.123"
          transform="rotate(30 1023.55 449.962)"
        />
        
        <!-- Secondary animated ellipse with drop shadow -->
        <g filter="url(#filter0_d_1_13)" id="blob-secondary">
          <ellipse
            cx="1087.93"
            cy="672.704"
            fill="url(#paint2_radial_1_13)"
            rx="524.878"
            ry="420.634"
            transform="rotate(18.5205 1087.93 672.704)"
          />
        </g>
        
        <!-- Small floating circle -->
        <circle 
          cx="1824" 
          cy="89" 
          fill="var(--fill-0, #1A0341)" 
          id="blob-accent" 
          r="189" 
        />
        
        <!-- Blur overlay -->
        <foreignObject height="100%" width="100%" x="0" y="0">
          <div
            class="blur-overlay"
            xmlns="http://www.w3.org/1999/xhtml"
          ></div>
        </foreignObject>

        <rect width="100%" height="100%" filter="url(#grainNoise)" opacity="0.5" />
      </g>
      
      <defs>
        <filter
          color-interpolation-filters="sRGB"
          filterUnits="objectBoundingBox"
          height="200%"
          id="filter0_d_1_13"
          width="200%"
          x="-50%"
          y="-50%"
        >
          <feFlood flood-opacity="0" result="BackgroundImageFix" />
          <feColorMatrix
            in="SourceAlpha"
            result="hardAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
          />
          <feOffset dx="117" dy="4" />
          <feGaussianBlur stdDeviation="2" />
          <feComposite in2="hardAlpha" operator="out" />
          <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0.49 0" />
          <feBlend in2="BackgroundImageFix" mode="normal" result="effect1_dropShadow_1_13" />
          <feBlend in="SourceGraphic" in2="effect1_dropShadow_1_13" mode="normal" result="shape" />
        </filter>
        
        
        <linearGradient gradientUnits="userSpaceOnUse" id="paint0_linear_1_13" x1="960" x2="960" y1="0" y2="1080">
          <stop stop-color="#5951FA" />
          <stop offset="0.5" stop-color="#2423B8" />
          <stop offset="0.956638" stop-color="#07010E" />
        </linearGradient>
        
        <linearGradient
          gradientUnits="userSpaceOnUse"
          id="paint1_linear_1_13"
          x1="1379.34"
          x2="446.936"
          y1="-298.693"
          y2="573.338"
        >
          <stop stop-color="#FF3D7B" />
          <stop offset="0.538462" stop-color="#FF9DBC" stop-opacity="0.888174" />
          <stop offset="1" stop-color="#DD36FF" stop-opacity="0.26" />
        </linearGradient>
        
        <radialGradient
          cx="0"
          cy="0"
          gradientTransform="translate(1087.93 672.704) rotate(90) scale(420.634 524.878)"
          gradientUnits="userSpaceOnUse"
          id="paint2_radial_1_13"
          r="1"
        >
          <stop stop-color="#130130" />
          <stop offset="1" stop-color="#090E3A" />
        </radialGradient>
        
        <clipPath id="clip0_1_13">
          <rect fill="white" height="1080" width="1920" />
        </clipPath>

        <filter id="grainNoise" x="0" y="0" width="100%" height="100%" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <!-- baseFrequency alto = grão mais fino; baixo = grão mais largo -->
          <feTurbulence type="fractalNoise" baseFrequency="0.75" numOctaves="2" seed="7" stitchTiles="stitch" result="noise"/>
          <feColorMatrix in="noise" type="saturate" values="0" result="bwNoise" />
          <feColorMatrix in="bwNoise" type="matrix"
    values="0 0 0 0 0
            0 0 0 0 0
            0 0 0 0 0
            0 0 0 1 0" />
        </filter>
      </defs>
    </svg>
  </div>
</div>

<style>
  /* Container styles */
  .blob-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1;
    width: 100%;
    height: 100%;
    overflow: hidden;
    pointer-events: auto;
  }

  /* Animation wrapper */
  .blob-animation-wrapper {
    /* animation: blob-container 30s ease-in-out infinite; */
    width: 100%;
    height: 100%;
  }

  /* SVG styles */
  .blob-svg {
    display: block;
    width: 100%;
    height: 100%;
  }

  /* Blur overlay */
  .blur-overlay {
    backdrop-filter: blur(100px);
    -webkit-backdrop-filter: blur(100px);
    height: 100%;
    width: 100%;
    background: rgba(255, 255, 255, 0.01);
  }

  /* Blob animations */
  #blob-main {
    animation: blob-main 25s ease-in-out infinite;
    transform-origin: 1023.55px 449.962px;
  }

  #blob-secondary ellipse {
    animation: blob-secondary 20s ease-in-out infinite;
    transform-origin: 1087.93px 672.704px;
  }

  #blob-accent {
    animation: blob-accent 15s ease-in-out infinite;
    transform-origin: 1824px 89px;
  }

  /* Keyframe animations translate(y, x) */
  @keyframes blob-main {
    0%, 100% {
      transform: translate(0px, 0px) rotate(30deg) scale(1);
    }

    25% {
      transform: translate(180px, -100px) rotate(40deg) scale(1.08);
    }

    50% {
      transform: translate(-60px, 50px) rotate(20deg) scale(0.95);
    }

    75% {
      transform: translate(80px, -30px) rotate(50deg) scale(1.05);
    }
  }

  @keyframes blob-secondary {
    0%, 100% {
      transform: translate(0px, 0px) rotate(18.5205deg) scale(1);
    }

    20% {
      transform: translate(-200px, 120px) rotate(30deg) scale(1.12);
    }

    40% {
      transform: translate(180px, -85px) rotate(5deg) scale(0.92);
    }

    60% {
      transform: translate(-45px, -190px) rotate(40deg) scale(1.08);
    }

    80% {
      transform: translate(60px, 35px) rotate(10deg) scale(0.96);
    }
  }

  @keyframes blob-accent {
    0%, 100% {
      transform: translate(0px, 0px) scale(1);
    }
    30% {
      transform: translate(120px, -90px) scale(1.25);
    }
    70% {
      transform: translate(-80px, 100px) scale(0.85);
    }
  }

  @keyframes blob-container {
    0%, 100% {
      transform: scale(1);
    }
    25% {
      transform: scale(1.03);
    }
    50% {
      transform: scale(1.05);
    }
    75% {
      transform: scale(1.02);
    }
  }
</style>