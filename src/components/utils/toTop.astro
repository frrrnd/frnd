---
---
<button id="to-top">
    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15.9993 6.66675V25.3334M15.9993 6.66675L25.3327 16.0001M15.9993 6.66675L6.66602 16.0001" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
</button>

<style>
    #to-top {
        -webkit-appearance: none;
        -moz-appearance: none;
        border: none;
        background-color: transparent;
        position: fixed;
        bottom: 110px;
        right: var(--spacing-2);
        font-size: 2rem;
        transition: .4s;
        cursor: pointer;

        svg path {
            stroke: hsla(var(--secondary-color), 1);
        }

        &:hover {
            background-color: transparent;
        }
    }
</style>
<script>
    const toTop = () => {
        const scrollToTopBtn = document.querySelector("#to-top");
        
        if (!scrollToTopBtn) {
            console.warn("Botão 'to-top' não encontrado no DOM");
            return;
        }

        scrollToTopBtn.style.opacity = "0";
        scrollToTopBtn.style.transform = "scale(0.5)";
        scrollToTopBtn.style.visibility = "hidden";

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: "smooth"
            });
        }

        const ButtonVisibility = () => {
            const scrollTotal = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPosition = window.scrollY;
            
            const scrollPercentage = (scrollPosition / scrollTotal) * 100;

            if (scrollPercentage > 20) {
                scrollToTopBtn.style.opacity = "1";
                scrollToTopBtn.style.visibility = "visible";
                scrollToTopBtn.style.transform = "scale(1)";
            } else {
                scrollToTopBtn.style.opacity = "0";
                scrollToTopBtn.style.visibility = "hidden";
                scrollToTopBtn.style.transform = "scale(0.5)";
            }
        }

        scrollToTopBtn.removeEventListener("click", scrollToTop);
        window.removeEventListener("scroll", ButtonVisibility);
        
        scrollToTopBtn.addEventListener("click", scrollToTop);
        window.addEventListener("scroll", ButtonVisibility);

        ButtonVisibility();
    }

    const fadeIn = () => {
        document.querySelectorAll('[data-fade]').forEach((element) => {
            const delay = element.getAttribute('data-fade');
            element.style.animationDelay = `${delay}s`;
        });
    }

    const setupListeners = (eventNames, callback) => {
        eventNames.forEach((event) => document.addEventListener(event, callback));
    }

    // Fire
    setupListeners(['DOMContentLoaded', 'astro:after-swap'], fadeIn);
    setupListeners(['DOMContentLoaded', 'astro:after-swap'], toTop);
</script>